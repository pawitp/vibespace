name = "vibespace"
main = "src/worker.js"
compatibility_date = "2025-01-01"

[assets]
directory = "./public"
run_worker_first = true
binding = "ASSETS"

[vars]
GITHUB_BRANCH = "main"
TOKEN_TTL_SECONDS = "86400"
GITHUB_DATA_OWNER = "<github-owner>"
GITHUB_DATA_REPO = "<github-data-repo>"
PASSKEY_OWNER_SUB = "<owner-sub>"
PASSKEY_RP_ID = "<worker-hostname>"
PASSKEY_ORIGIN = "https://<worker-hostname>"

# Secrets (set with `wrangler secret put`):
# GITHUB_PAT
# SESSION_SECRET

[[d1_databases]]
binding = "PASSKEYS_DB"
database_name = "<d1-database-name>"
database_id = "<d1-database-id>"

[[r2_buckets]]
binding = "ASSET_BLOBS"
bucket_name = "<r2-asset-bucket-name>"
